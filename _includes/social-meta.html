{%- comment -%}
  Image handling: Support both simple string and object formats
  - Simple: image: /path/to/image.jpg
  - Object: image: { path: /path/to/image.jpg, alt: "Description", width: 1200, height: 630 }
{%- endcomment -%}
{%- if page.image.path -%}
  {%- assign page_image = page.image.path -%}
  {%- assign page_image_alt = page.image.alt | default: page.title -%}
  {%- assign page_image_width = page.image.width | default: 1200 -%}
  {%- assign page_image_height = page.image.height | default: 630 -%}
{%- elsif page.image -%}
  {%- assign page_image = page.image -%}
  {%- assign page_image_alt = page.image_alt | default: page.title -%}
  {%- assign page_image_width = 1200 -%}
  {%- assign page_image_height = 630 -%}
{%- elsif site.default_image.path -%}
  {%- assign page_image = site.default_image.path -%}
  {%- assign page_image_alt = site.default_image.alt | default: site.title -%}
  {%- assign page_image_width = site.default_image.width | default: 1200 -%}
  {%- assign page_image_height = site.default_image.height | default: 630 -%}
{%- else -%}
  {%- assign page_image = site.default_image | default: '/assets/images/default-post-header.jpg' -%}
  {%- assign page_image_alt = site.title -%}
  {%- assign page_image_width = 1200 -%}
  {%- assign page_image_height = 630 -%}
{%- endif -%}

<!-- Open Graph -->
<meta property="og:type" content="{%- if page.layout == 'post' -%}article{%- else -%}website{%- endif -%}">
<meta property="og:title" content="{{ page.title | default: site.title | escape }}">
<meta property="og:description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | truncate: 160 | escape }}">
<meta property="og:url" content="{{ page.url | absolute_url }}">
<meta property="og:image" content="{{ page_image | absolute_url }}">
<meta property="og:image:width" content="{{ page_image_width }}">
<meta property="og:image:height" content="{{ page_image_height }}">
<meta property="og:image:alt" content="{{ page_image_alt | escape }}">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:site_name" content="{{ site.title }}">
{%- if page.layout == 'post' -%}
<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
<meta property="article:author" content="{{ page.author | default: site.author.name }}">
{%- for tag in page.tags -%}
<meta property="article:tag" content="{{ tag }}">
{%- endfor -%}
{%- endif -%}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page.title | default: site.title | escape }}">
<meta name="twitter:description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | truncate: 160 | escape }}">
<meta name="twitter:image" content="{{ page_image | absolute_url }}">
<meta name="twitter:image:alt" content="{{ page_image_alt | escape }}">
{%- if site.twitter.username -%}
<meta name="twitter:site" content="@{{ site.twitter.username }}">
<meta name="twitter:creator" content="@{{ site.twitter.username }}">
{%- endif -%}
