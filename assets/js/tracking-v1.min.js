!function(t){"use strict";var n={CONSENT_VERSION:1,CONSENT_COOKIE_NAME:"cookie_consent",CONSENT_MAX_AGE:31536e3,DEFAULT_MEASUREMENT_ID:"G-S1HPGRH0XY",DEFAULT_COOKIE_DOMAIN:".tacticaltrainer.eu"},e={get:function(t){var n=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));if(!n)return null;try{return JSON.parse(decodeURIComponent(n[2]))}catch(t){return null}},set:function(t,n,e){var o=t+"="+encodeURIComponent(JSON.stringify(n));e.domain&&(o+="; domain="+e.domain),e.maxAge&&(o+="; max-age="+e.maxAge),o+="; path=/; SameSite=Lax","https:"===location.protocol&&(o+="; Secure"),document.cookie=o}},o={options:null,init:function(t){this.options=t},getConsent:function(){if(this.options&&this.options.existingConsent)return{version:n.CONSENT_VERSION,preferences:this.options.existingConsent};var t=e.get(n.CONSENT_COOKIE_NAME);if(t)return t;try{var o=localStorage.getItem(n.CONSENT_COOKIE_NAME);return o?JSON.parse(o):null}catch(t){return null}},hasValidConsent:function(){if(this.options&&this.options.existingConsent)return!0;var t=this.getConsent();return t&&t.version>=n.CONSENT_VERSION},hasAnalyticsConsent:function(){var t=this.getConsent();return t&&t.version>=n.CONSENT_VERSION&&t.preferences&&!0===t.preferences.analytics},saveConsent:function(t){var o={version:n.CONSENT_VERSION,timestamp:(new Date).toISOString(),preferences:{application:!0,analytics:t.analytics||!1}};e.set(n.CONSENT_COOKIE_NAME,o,{domain:this.options.cookieDomain,maxAge:n.CONSENT_MAX_AGE});try{localStorage.setItem(n.CONSENT_COOKIE_NAME,JSON.stringify(o))}catch(t){}if(this.options&&this.options.onConsentChange)try{this.options.onConsentChange(o.preferences)}catch(t){"undefined"!=typeof console&&console.error("[TacticalTracking] onConsentChange callback error:",t)}return o}},i={loaded:!1,options:null,init:function(t){this.options=t},load:function(){if(!this.loaded){this.loaded=!0,t.dataLayer=t.dataLayer||[],t.gtag=function(){t.dataLayer.push(arguments)},t.gtag("js",new Date);var n={};this.options.contentGroup&&(n.content_group=this.options.contentGroup),t.gtag("config",this.options.measurementId,n);var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id="+this.options.measurementId,document.head.appendChild(e),document.body&&(document.body.dataset.analyticsLoaded="true"),t.dispatchEvent(new CustomEvent("tracking:analytics-loaded"))}},isLoaded:function(){return this.loaded}},s={element:null,onAccept:null,onReject:null,hiddenClass:"tt-consent-hidden",useExisting:function(t,n){this.element=t,this.onAccept=n.onAccept,this.onReject=n.onReject,t.classList.contains("hidden")?this.hiddenClass="hidden":this.hiddenClass="tt-consent-hidden";var e=this,o=t.querySelector('[data-action*="acceptAll"], [data-tracking-action="accept"]'),i=t.querySelector('[data-action*="rejectNonEssential"], [data-tracking-action="reject"]');return o&&o.addEventListener("click",function(t){t.preventDefault(),e.hide(),e.onAccept&&e.onAccept()}),i&&i.addEventListener("click",function(t){t.preventDefault(),e.hide(),e.onReject&&e.onReject()}),t},create:function(t){this.onAccept=t.onAccept,this.onReject=t.onReject,this.hiddenClass="tt-consent-hidden";var n=document.createElement("div");n.id="cookie-consent-banner",n.className="tt-consent-banner tt-consent-hidden",n.setAttribute("role","dialog"),n.setAttribute("aria-label","Cookie consent"),n.innerHTML=['<div class="tt-consent-container">','  <div class="tt-consent-content">','    <h2 class="tt-consent-title">Cookie Preferences</h2>','    <p class="tt-consent-text">',"      We use cookies to enhance your experience. Application cookies are required ","      for the site to function. You can choose whether to allow analytics cookies ","      that help us improve our services.","    </p>","  </div>",'  <div class="tt-consent-actions">','    <button type="button" class="tt-consent-btn tt-consent-btn-secondary" data-action="reject">',"      Application Only","    </button>",'    <button type="button" class="tt-consent-btn tt-consent-btn-primary" data-action="accept">',"      Accept All","    </button>","  </div>","</div>"].join("\n");var e=this;return n.querySelector('[data-action="accept"]').addEventListener("click",function(){e.hide(),e.onAccept&&e.onAccept()}),n.querySelector('[data-action="reject"]').addEventListener("click",function(){e.hide(),e.onReject&&e.onReject()}),this.element=n,n},inject:function(){this.element&&document.body.appendChild(this.element)},show:function(){if(this.element){this.element.classList.remove(this.hiddenClass);var t=this.element.querySelector("button");t&&setTimeout(function(){t.focus()},100)}},hide:function(){this.element&&this.element.classList.add(this.hiddenClass)},isVisible:function(){return!!this.element&&!this.element.classList.contains(this.hiddenClass)},injectStyles:function(){if(!document.getElementById("tt-consent-styles")){var t=document.createElement("style");t.id="tt-consent-styles",t.textContent=[".tt-consent-banner {","  position: fixed;","  bottom: 0;","  left: 0;","  right: 0;","  z-index: 9999;","  padding: 1rem;",'  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;',"}",".tt-consent-hidden {","  display: none;","}",".tt-consent-container {","  max-width: 42rem;","  margin: 0 auto;","  background: #292524;","  border: 1px solid #44403c;","  border-radius: 0.75rem;","  padding: 1.5rem;","  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);","}",".tt-consent-title {","  font-size: 1.125rem;","  font-weight: 600;","  color: #f5f5f4;","  margin: 0 0 0.5rem 0;","}",".tt-consent-text {","  font-size: 0.875rem;","  color: #a8a29e;","  margin: 0 0 1.5rem 0;","  line-height: 1.5;","}",".tt-consent-actions {","  display: flex;","  gap: 0.75rem;","  flex-wrap: wrap;","}",".tt-consent-btn {","  padding: 0.625rem 1.25rem;","  font-size: 0.875rem;","  font-weight: 500;","  border-radius: 0.5rem;","  cursor: pointer;","  transition: background-color 0.15s, border-color 0.15s;","}",".tt-consent-btn-secondary {","  color: #f5f5f4;","  background: #1c1917;","  border: 1px solid #44403c;","}",".tt-consent-btn-secondary:hover {","  background: #292524;","  border-color: #57534e;","}",".tt-consent-btn-primary {","  color: #1c1917;","  background: #f59e0b;","  border: none;","}",".tt-consent-btn-primary:hover {","  background: #d97706;","}","@media (max-width: 640px) {","  .tt-consent-banner {","    padding-bottom: env(safe-area-inset-bottom, 1rem);","  }","  .tt-consent-actions {","    flex-direction: column;","  }","  .tt-consent-btn {","    width: 100%;","    text-align: center;","  }","}"].join("\n"),document.head.appendChild(t)}}},a={initialized:!1,options:null,_internals:{CONFIG:n,CookieUtil:e,ConsentManager:o,AnalyticsManager:i,BannerUI:s},init:function(t){this.initialized?this.log("Already initialized"):(this.options={measurementId:t&&t.measurementId||n.DEFAULT_MEASUREMENT_ID,cookieDomain:t&&t.cookieDomain||n.DEFAULT_COOKIE_DOMAIN,contentGroup:t&&t.contentGroup||"marketing",debug:t&&t.debug||!1,onConsentChange:t&&t.onConsentChange||null,existingConsent:t&&t.existingConsent||null,bannerElement:t&&t.bannerElement||null},this.log("Initializing with options:",this.options),o.init(this.options),i.init(this.options),this.options.existingConsent?(this.log("Using server-provided consent"),this.applyConsent()):o.hasValidConsent()?(this.log("Valid consent found in storage"),this.applyConsent()):(this.log("No valid consent, showing banner"),this.showBanner()),this.initialized=!0)},reset:function(){this.initialized=!1,this.options=null,i.loaded=!1,i.options=null,o.options=null,s.element=null,s.onAccept=null,s.onReject=null,s.hiddenClass="tt-consent-hidden"},showBanner:function(){var t=this;this.options.bannerElement?s.useExisting(this.options.bannerElement,{onAccept:function(){t.acceptAll()},onReject:function(){t.rejectNonEssential()}}):(s.injectStyles(),s.create({onAccept:function(){t.acceptAll()},onReject:function(){t.rejectNonEssential()}}),s.inject()),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(function(){s.show()}):s.show()},acceptAll:function(){this.log("User accepted all cookies"),o.saveConsent({analytics:!0}),this.applyConsent(),t.dispatchEvent(new CustomEvent("tracking:consent-updated",{detail:{analytics:!0}}))},rejectNonEssential:function(){this.log("User rejected non-essential cookies"),o.saveConsent({analytics:!1}),this.applyConsent(),t.dispatchEvent(new CustomEvent("tracking:consent-updated",{detail:{analytics:!1}}))},applyConsent:function(){document.body&&(document.body.dataset.analyticsConsent=o.hasAnalyticsConsent()?"true":"false"),o.hasAnalyticsConsent()?(this.log("Analytics consent granted, loading GA"),i.load()):this.log("Analytics consent not granted")},hasAnalyticsConsent:function(){return o.hasAnalyticsConsent()},getConsent:function(){return o.getConsent()},showConsentBanner:function(){s.element?s.show():this.showBanner()},isAnalyticsLoaded:function(){return i.isLoaded()},log:function(){this.options&&this.options.debug&&console.log.apply(console,["[TacticalTracking]"].concat(Array.prototype.slice.call(arguments)))}};t.TacticalTracking=a}("undefined"!=typeof window?window:this);